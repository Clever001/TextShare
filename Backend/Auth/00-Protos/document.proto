syntax = "proto3";

import "00-Protos/shared.proto";

option csharp_namespace = "Auth.Grpc";
package Documents;

service DocumentGrpc {
    rpc SaveDocumentMetadata (SaveDocumentGrpcReq) returns (Shared.EmptyGrpcResult);
    rpc UpdateDefaultRoleForDocument (UpdateDefaultRoleGrpcReq) returns (Shared.EmptyGrpcResult);
    rpc DeleteDocumentMetadata (DeleteDocumentGrpcReq) returns (Shared.EmptyGrpcResult);
    rpc GetUserRoleForDocument (UserRoleGrpcRequest) returns (UserRoleGrpcResult);
}

message SaveDocumentGrpcReq {
    string document_id = 1;
    string creator_id = 2;
    string default_role_name = 3;
}

message UpdateDefaultRoleGrpcReq {
    string document_id = 1;
    string default_role_name = 2;
}

message DeleteDocumentGrpcReq {
    string document_id = 1;
}

message UserRoleGrpcRequest {
    string user_id = 1;
    string document_id = 2;
}

message UserRoleGrpcResult {
    oneof result {
        UserRoleGrpcDto user_role = 1;
        Shared.GrpcException exception = 2;
    }
}

message UserRoleGrpcDto {
    string role_name = 1;
    bool can_read = 2;
    bool can_comment = 3;
    bool can_edit = 4;
    bool can_create_role_grants = 5;
    bool can_manage_roles = 6;
}