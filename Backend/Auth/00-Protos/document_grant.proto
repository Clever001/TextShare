syntax = "proto3";

import "00-Protos/shared.proto";

option csharp_namespace = "Auth.Grpc";
package DocumentGrants;

service DocumentGrantGrpc {
    rpc CreateDocumentGrant (CreateDocumentGrantGrpcRequest)
        returns (DocumentGrantGrpcResult);
    rpc DeleteDocumentGrant (DeleteDocumentGrantGrpcRequest)
        returns (Shared.EmptyGrpcResult);
    rpc GetDocumentGrants (DocumentGrantsGrpcPagedFilter)
        returns (PagedDocumentGrantsGrpcResult);
    rpc ProvideRoleByGrant (ProvideRoleByGrantGrpcRequest)
        returns (Shared.EmptyGrpcResult);
    rpc ProvideRoleByRoleName (ProvideRoleByRoleNameGrpcRequest)
        returns (Shared.EmptyGrpcResult);
}

message CreateDocumentGrantGrpcRequest {
    string document_id = 1;
    string role_name = 2;
    string calling_user_id = 3;
}

message DeleteDocumentGrantGrpcRequest {
    string document_grant_id = 1;
    string calling_user_id = 2;
}

message DocumentGrantsGrpcPagedFilter {
    Shared.PaginationGrpcPage pagination_page = 1;
    optional string document_id = 2;
    optional string role_name = 3;
    string calling_user_id = 4;
}

message ProvideRoleByGrantGrpcRequest {
    string document_grant_id = 1;
    string calling_user_id = 2;
}

message ProvideRoleByRoleNameGrpcRequest {
    string document_id = 1;
    string role_name = 2;
    string user_id_to_provide_role = 3;
    string calling_user_id = 4;
}

message DocumentGrantGrpcResult {
    oneof result {
        Shared.GrpcException expception = 1;
        DocumentGrantGrpcDto document_grant = 2;
    }
}

message PagedDocumentGrantsGrpcResult {
    oneof result {
        Shared.GrpcException exception = 1;
        PagedDocumentGrantsGrpc document_grants = 2;
    }
}

message PagedDocumentGrantsGrpc {
    repeated DocumentGrantGrpcDto items = 1;
    Shared.PaginationGrpcResponse pagination = 2;
}

message DocumentGrantGrpcDto {
    string document_grant_id = 1;
    string document_id = 2;
    string role_name = 3;
}